{
  "schemaVersion": "1.0.0",
  "contentVersion": "1.0.0",
  "checksum": "2d24795c598b6e9129926967610f3be742740429d909522b11184fd2955de6c7",
  "kind": "blueprint",
  "layer": {
    "module": "admin-community",
    "route": "members/profile",
    "tenant": null,
    "role": null,
    "variant": null,
    "locale": "en-US"
  },
  "page": {
    "id": "admin-community-membership-profile",
    "title": "Membership profile",
    "regions": [
      {
        "id": "main",
        "components": [
          {
            "id": "profile-hero",
            "type": "HeroSection",
            "props": {
              "variant": {
                "kind": "static",
                "value": "split"
              },
              "eyebrow": {
                "kind": "expression",
                "expression": "\n              (() => {\n                const records = data.memberDirectory?.records ?? [];\n                const fallback = records[0] ?? {};\n                const record = records.find((item) => item.id === params.memberId) ?? fallback;\n                return `${record.stage ?? \"Active\"} · ${record.center ?? \"Center\"}`;\n              })()\n            "
              },
              "headline": {
                "kind": "expression",
                "expression": "\n              (() => {\n                const records = data.memberDirectory?.records ?? [];\n                const fallback = records[0] ?? {};\n                const record = records.find((item) => item.id === params.memberId) ?? fallback;\n                return `${record.fullName ?? \"Member\"} household profile`;\n              })()\n            "
              },
              "description": {
                "kind": "expression",
                "expression": "\n              (() => {\n                const records = data.memberDirectory?.records ?? [];\n                const fallback = records[0] ?? {};\n                const record = records.find((item) => item.id === params.memberId) ?? fallback;\n                const center = record.center ?? \"primary center\";\n                const serving = record.serving?.team ? `${record.serving.team} team` : \"serving opportunities\";\n                const coach = record.serving?.coach ? `Coached by ${record.serving.coach}.` : \"\";\n                return `${record.preferredName ?? record.fullName ?? \"This member\"} worships at the ${center} and is engaged with the ${serving}. ${coach}`.trim();\n              })()\n            "
              },
              "image": {
                "kind": "expression",
                "expression": "\n              (() => {\n                const records = data.memberDirectory?.records ?? [];\n                const fallback = records[0] ?? {};\n                const record = records.find((item) => item.id === params.memberId) ?? fallback;\n                const fullName = record.fullName ?? 'Member';\n                const photoUrl = record.photoUrl ?? '';\n                const fallbackUrl = 'https://images.unsplash.com/photo-1545239351-1141bd82e8a6?auto=format&fit=facearea&w=600&h=600&q=80';\n                return {\n                  src: photoUrl || fallbackUrl,\n                  alt: `${fullName}'s profile photo`\n                };\n              })()\n            "
              },
              "metrics": {
                "kind": "expression",
                "expression": "\n              (() => {\n                const records = data.memberDirectory?.records ?? [];\n                const fallback = records[0] ?? {};\n                const record = records.find((item) => item.id === params.memberId) ?? fallback;\n                const formatCurrency = (amount) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: amount >= 1000 ? 0 : 2 }).format(amount ?? 0);\n                return [\n                  { label: 'YTD giving', value: formatCurrency(record.giving?.ytd ?? 0), caption: `Pledge ${formatCurrency(record.giving?.pledge ?? 0)}` },\n                  { label: 'Serving rhythm', value: record.serving?.schedule ?? 'Every other week', caption: record.serving?.team ?? 'Serving team' },\n                  { label: 'Care status', value: record.carePlan?.status ?? 'Resolved', caption: record.carePlan?.details ?? 'No active plan' }\n                ];\n              })()\n            "
              },
              "primaryCta": {
                "kind": "expression",
                "expression": "\n              (() => {\n                const records = data.memberDirectory?.records ?? [];\n                const fallback = records[0] ?? {};\n                const record = records.find((item) => item.id === params.memberId) ?? fallback;\n                const targetId = record.id ?? params.memberId ?? '';\n                return {\n                  id: 'edit-member-cta',\n                  config: {\n                    label: 'Edit member',\n                    url: `/admin/members/manage?memberId=${targetId}`,\n                    variant: 'primary'\n                  }\n                };\n              })()\n            "
              },
              "secondaryCta": {
                "kind": "action",
                "actionId": "back-to-list"
              }
            }
          },
          {
            "id": "profile-metrics",
            "type": "AdminMetricCards",
            "props": {
              "title": {
                "kind": "static",
                "value": "Discipleship pulse"
              },
              "metrics": {
                "kind": "expression",
                "expression": "\n              (() => {\n                const records = data.memberDirectory?.records ?? [];\n                const fallback = records[0] ?? {};\n                const record = records.find((item) => item.id === params.memberId) ?? fallback;\n                const formatCurrency = (value) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: value >= 1000 ? 0 : 2 }).format(value ?? 0);\n                return [\n                  {\n                    id: 'metric-recurring',\n                    label: 'Recurring giving',\n                    value: formatCurrency(record.giving?.recurring?.amount ?? 0),\n                    change: record.giving?.recurring?.frequency ?? 'Monthly',\n                    trend: 'up',\n                    tone: 'informative',\n                    description: `Method: ${record.giving?.recurring?.method ?? 'Card'} · Last gift ${formatCurrency(record.giving?.lastGift?.amount ?? 0)} on ${record.giving?.lastGift?.date ?? ''}`\n                  },\n                  {\n                    id: 'metric-groups',\n                    label: 'Group participation',\n                    value: record.discipleship?.smallGroup ?? 'Not enrolled',\n                    change: record.discipleship?.mentor ? `Mentor: ${record.discipleship.mentor}` : 'Mentor not assigned',\n                    trend: 'flat',\n                    tone: 'neutral',\n                    description: record.discipleship?.nextStep ?? 'Set next discipleship step.'\n                  },\n                  {\n                    id: 'metric-milestones',\n                    label: 'Milestones completed',\n                    value: String(record.discipleship?.milestones?.length ?? 0),\n                    change: record.discipleship?.milestones?.slice(-1)[0] ?? 'No recent milestone',\n                    trend: 'up',\n                    tone: 'positive',\n                    description: 'Celebrate wins during next pastoral huddle.'\n                  }\n                ];\n              })()\n            "
              }
            }
          },
          {
            "id": "profile-panels",
            "type": "AdminDetailPanels",
            "props": {
              "panels": {
                "kind": "expression",
                "expression": "\n              (() => {\n                const records = data.memberDirectory?.records ?? [];\n                const fallback = records[0] ?? {};\n                const record = records.find((item) => item.id === params.memberId) ?? fallback;\n                const address = record.household?.address;\n                return [\n                  {\n                    id: 'contact',\n                    title: 'Contact & household',\n                    description: record.household?.name ?? '',\n                    items: [\n                      { label: 'Email', type: 'link', href: record.contact?.email ? `mailto:${record.contact.email}` : undefined, value: record.contact?.email ?? '—' },\n                      { label: 'Mobile', value: record.contact?.phone ?? '—' },\n                      { label: 'Preferred contact', value: record.contact?.preferred ?? 'Email' },\n                      { label: 'Household members', type: 'chips', items: record.household?.members ?? [] },\n                      { label: 'Address', type: 'multiline', value: address ? `${address.street}\\n${address.city}, ${address.state} ${address.postalCode}` : 'No address on file' }\n                    ]\n                  },\n                  {\n                    id: 'giving',\n                    title: 'Giving & pledges',\n                    badge: 'Finance',\n                    items: [\n                      { label: 'Year-to-date', type: 'currency', value: record.giving?.ytd ?? 0 },\n                      { label: 'Pledge commitment', type: 'currency', value: record.giving?.pledge ?? 0, description: record.giving?.campaign ?? 'Legacy Vision 2025' },\n                      { label: 'Recurring schedule', value: record.giving?.recurring ? `${record.giving.recurring.frequency} · ${record.giving.recurring.method}` : 'Not enrolled' },\n                      { label: 'Last gift', value: record.giving?.lastGift ? `${record.giving.lastGift.date} · ${record.giving.lastGift.fund}` : '—', description: record.giving?.lastGift ? `$${record.giving.lastGift.amount}` : '' }\n                    ]\n                  },\n                  {\n                    id: 'serving',\n                    title: 'Serving & leadership',\n                    badge: 'Teams',\n                    items: [\n                      { label: 'Team', value: record.serving?.team ?? 'Not serving' },\n                      { label: 'Role', value: record.serving?.role ?? '—' },\n                      { label: 'Schedule', value: record.serving?.schedule ?? 'Flexible' },\n                      { label: 'Coach', value: record.serving?.coach ?? 'Not assigned' }\n                    ]\n                  },\n                  {\n                    id: 'care',\n                    title: 'Care plan',\n                    badge: 'Shepherding',\n                    items: [\n                      { label: 'Stage', type: 'badge', value: record.carePlan?.status ?? 'Resolved', variant: record.carePlan?.statusVariant ?? 'neutral' },\n                      { label: 'Assigned pastor', value: record.carePlan?.assignedTo ?? '—' },\n                      { label: 'Plan details', type: 'multiline', value: record.carePlan?.details ?? 'No active care tasks.' }\n                    ]\n                  }\n                ];\n              })()\n            "
              },
              "columns": {
                "kind": "static",
                "value": ""
              }
            }
          },
          {
            "id": "profile-timeline",
            "type": "AdminActivityTimeline",
            "props": {
              "title": {
                "kind": "static",
                "value": "Recent milestones"
              },
              "events": {
                "kind": "expression",
                "expression": "\n              (() => {\n                const records = data.memberDirectory?.records ?? [];\n                const fallback = records[0] ?? {};\n                const record = records.find((item) => item.id === params.memberId) ?? fallback;\n                return record.timeline ?? [];\n              })()\n            "
              }
            }
          }
        ]
      }
    ],
    "dataSources": [
      {
        "id": "memberDirectory",
        "kind": "service",
        "config": {
          "value": {
            "records": [
              {
                "id": "mem_001",
                "fullName": "Avery Johnson",
                "preferredName": "Avery",
                "photoUrl": "https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=facearea&w=400&h=400&q=80",
                "stage": "Active member",
                "statusVariant": "success",
                "center": "Downtown Center",
                "serving": {
                  "team": "Hospitality",
                  "role": "Usher Captain",
                  "schedule": "2nd & 4th Sundays · 8:30a",
                  "coach": "Rachel Kim"
                },
                "household": {
                  "name": "Johnson Family",
                  "members": [
                    "Avery Johnson",
                    "Jordan Johnson",
                    "Micah (7)",
                    "Selah (4)"
                  ],
                  "address": {
                    "street": "412 Hope Ave",
                    "city": "Springfield",
                    "state": "IL",
                    "postalCode": "62704"
                  }
                },
                "contact": {
                  "email": "avery.johnson@example.org",
                  "phone": "(555) 204-1188",
                  "preferred": "Text"
                },
                "giving": {
                  "ytd": 18450,
                  "pledge": 22000,
                  "campaign": "Legacy Vision 2025",
                  "recurring": {
                    "amount": 900,
                    "frequency": "Monthly",
                    "method": "ACH"
                  },
                  "lastGift": {
                    "amount": 450,
                    "date": "2024-10-06",
                    "fund": "General Tithe"
                  }
                },
                "discipleship": {
                  "smallGroup": "Downtown Leadership Cohort",
                  "mentor": "Carlos Vega",
                  "milestones": [
                    "Baptized 2014",
                    "Child dedication 2017",
                    "Leadership Cohort 2022"
                  ],
                  "nextStep": "Mentor two new ushers before Advent."
                },
                "carePlan": {
                  "stage": "Active",
                  "statusVariant": "info",
                  "details": "Leadership coaching check-in scheduled October 28.",
                  "assignedTo": "Pastor Lauren Patel"
                },
                "timeline": [
                  {
                    "id": "t1",
                    "title": "Hosted hospitality huddle",
                    "date": "Oct 13",
                    "timeAgo": "3 days ago",
                    "description": "Led new volunteer orientation for the downtown center.",
                    "category": "Serving",
                    "stage": "completed",
                    "icon": "🙌"
                  },
                  {
                    "id": "t2",
                    "title": "Mentor meeting",
                    "date": "Oct 21",
                    "timeAgo": "In 5 days",
                    "description": "Coaching session with new volunteer captain.",
                    "category": "Leadership",
                    "stage": "scheduled",
                    "icon": "🗓️"
                  }
                ]
              },
              {
                "id": "mem_002",
                "fullName": "Elena Ruiz",
                "preferredName": "Elena",
                "photoUrl": "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?auto=format&fit=facearea&w=400&h=400&q=80",
                "stage": "New here",
                "statusVariant": "info",
                "center": "Northside Center",
                "serving": {
                  "team": "Exploring",
                  "role": "Foundations participant",
                  "schedule": "Sundays · 9:30a"
                },
                "household": {
                  "name": "Ruiz Household",
                  "members": [
                    "Elena Ruiz"
                  ],
                  "address": {
                    "street": "88 River Crossing",
                    "city": "Franklin",
                    "state": "TN",
                    "postalCode": "37067"
                  }
                },
                "contact": {
                  "email": "elena.ruiz@example.org",
                  "phone": "(555) 407-9931",
                  "preferred": "Phone"
                },
                "giving": {
                  "ytd": 420,
                  "pledge": 0,
                  "recurring": null,
                  "lastGift": {
                    "amount": 70,
                    "date": "2024-10-05",
                    "fund": "Guest Offering"
                  }
                },
                "discipleship": {
                  "smallGroup": "Foundations Track",
                  "mentor": "Jamie Brooks",
                  "milestones": [
                    "Guest dinner 2024-09-22"
                  ],
                  "nextStep": "Complete covenant class interview."
                },
                "carePlan": {
                  "stage": "Observation",
                  "statusVariant": "neutral",
                  "details": "Following up after recent relocation.",
                  "assignedTo": "Center Connections Team"
                },
                "timeline": [
                  {
                    "id": "r1",
                    "title": "Foundations session two",
                    "date": "Oct 10",
                    "timeAgo": "6 days ago",
                    "description": "Completed teaching on church values.",
                    "category": "Assimilation",
                    "stage": "completed",
                    "icon": "📘"
                  },
                  {
                    "id": "r2",
                    "title": "Covenant interview scheduled",
                    "date": "Oct 24",
                    "timeAgo": "In 8 days",
                    "description": "Meeting with elder team to finalize membership.",
                    "category": "Next step",
                    "stage": "scheduled",
                    "icon": "🤝"
                  }
                ]
              },
              {
                "id": "mem_003",
                "fullName": "Samuel and Dana Lee",
                "preferredName": "Lee Family",
                "photoUrl": "https://images.unsplash.com/photo-1531891437562-4301cf35b7e4?auto=format&fit=facearea&w=400&h=400&q=80",
                "stage": "Active member",
                "statusVariant": "success",
                "center": "Southridge Center",
                "serving": {
                  "team": "Groups",
                  "role": "Marriage mentors",
                  "schedule": "1st & 3rd Wednesdays"
                },
                "household": {
                  "name": "Lee Household",
                  "members": [
                    "Samuel Lee",
                    "Dana Lee",
                    "Elliot (12)"
                  ],
                  "address": {
                    "street": "215 Grace Circle",
                    "city": "Nashville",
                    "state": "TN",
                    "postalCode": "37211"
                  }
                },
                "contact": {
                  "email": "samuel.dana.lee@example.org",
                  "phone": "(555) 782-4410",
                  "preferred": "Email"
                },
                "giving": {
                  "ytd": 23780,
                  "pledge": 30000,
                  "campaign": "Southridge Expansion",
                  "recurring": {
                    "amount": 2000,
                    "frequency": "Monthly",
                    "method": "Card"
                  },
                  "lastGift": {
                    "amount": 2500,
                    "date": "2024-09-30",
                    "fund": "Expansion"
                  }
                },
                "discipleship": {
                  "smallGroup": "Southridge Marriage Mentors",
                  "mentor": "Elder Hannah Cruz",
                  "milestones": [
                    "Baptized 2009",
                    "Marriage mentors certified 2018"
                  ],
                  "nextStep": "Launch two new marriage groups in Q1."
                },
                "carePlan": {
                  "stage": "Resolved",
                  "statusVariant": "neutral",
                  "details": "No active pastoral needs.",
                  "assignedTo": ""
                },
                "timeline": [
                  {
                    "id": "l1",
                    "title": "Led marriage intensive",
                    "date": "Oct 05",
                    "timeAgo": "11 days ago",
                    "description": "Hosted eight couples for weekend retreat.",
                    "category": "Ministry",
                    "stage": "completed",
                    "icon": "💍"
                  }
                ]
              },
              {
                "id": "mem_004",
                "fullName": "Jordan Miles",
                "preferredName": "Jordan",
                "photoUrl": "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=facearea&w=400&h=400&q=80",
                "stage": "Shepherding",
                "statusVariant": "warning",
                "center": "Downtown Center",
                "serving": {
                  "team": "Tech",
                  "role": "Audio volunteer",
                  "schedule": "Paused"
                },
                "household": {
                  "name": "Miles Household",
                  "members": [
                    "Jordan Miles",
                    "Taylor Miles"
                  ],
                  "address": {
                    "street": "18 Lantern Way",
                    "city": "Springfield",
                    "state": "IL",
                    "postalCode": "62703"
                  }
                },
                "contact": {
                  "email": "jordan.miles@example.org",
                  "phone": "(555) 338-6611",
                  "preferred": "Text"
                },
                "giving": {
                  "ytd": 2600,
                  "pledge": 3000,
                  "recurring": null,
                  "lastGift": {
                    "amount": 200,
                    "date": "2024-08-18",
                    "fund": "General Tithe"
                  }
                },
                "discipleship": {
                  "smallGroup": "Young Professionals",
                  "mentor": "Pastor Lauren Patel",
                  "milestones": [
                    "Baptized 2016"
                  ],
                  "nextStep": "Resume serve team rotation after care plan concludes."
                },
                "carePlan": {
                  "stage": "Active",
                  "statusVariant": "warning",
                  "details": "Meeting with counselor weekly for grief support.",
                  "assignedTo": "Care Pastor Ben Adams"
                },
                "timeline": [
                  {
                    "id": "m1",
                    "title": "Counseling session",
                    "date": "Oct 11",
                    "timeAgo": "5 days ago",
                    "description": "Third session in current care plan.",
                    "category": "Care",
                    "stage": "completed",
                    "icon": "🕊️"
                  },
                  {
                    "id": "m2",
                    "title": "Care team check-in",
                    "date": "Oct 17",
                    "timeAgo": "Tomorrow",
                    "description": "Home visit with meal train delivery.",
                    "category": "Shepherding",
                    "stage": "scheduled",
                    "icon": "🍲"
                  }
                ]
              }
            ]
          },
          "handler": "admin-community.members.profile.memberDirectory"
        }
      }
    ],
    "actions": [
      {
        "id": "back-to-list",
        "kind": "link",
        "config": {
          "Label": "Back to list",
          "Url": "/admin/members/list",
          "Variant": "secondary"
        }
      }
    ]
  },
  "sourcePath": "metadata/authoring/blueprints/admin-community/membership-profile.xml"
}
