<?xml version="1.0" encoding="UTF-8"?>
<PageDefinition
  kind="blueprint"
  module="admin-community"
  route="members/profile"
  schemaVersion="1.0.0"
  contentVersion="1.0.0"
  locale="en-US"
>
  <Page id="admin-community-membership-profile">
    <Title>Membership profile</Title>
    <Regions>
      <Region id="main">
        <Component id="profile-hero" type="HeroSection">
          <Props>
            <Prop name="variant" kind="static">split</Prop>
            <Prop name="eyebrow" kind="expression"><![CDATA[
              (() => {
                const records = data.memberDirectory?.records ?? [];
                const fallback = records[0] ?? {};
                const record = records.find((item) => item.id === params.memberId) ?? fallback;
                return `${record.stage ?? "Active"} Â· ${record.center ?? "Center"}`;
              })()
            ]]></Prop>
            <Prop name="headline" kind="expression"><![CDATA[
              (() => {
                const records = data.memberDirectory?.records ?? [];
                const fallback = records[0] ?? {};
                const record = records.find((item) => item.id === params.memberId) ?? fallback;
                return `${record.fullName ?? "Member"} household profile`;
              })()
            ]]></Prop>
            <Prop name="description" kind="expression"><![CDATA[
              (() => {
                const records = data.memberDirectory?.records ?? [];
                const fallback = records[0] ?? {};
                const record = records.find((item) => item.id === params.memberId) ?? fallback;
                const center = record.center ?? "primary center";
                const serving = record.serving?.team ? `${record.serving.team} team` : "serving opportunities";
                const coach = record.serving?.coach ? `Coached by ${record.serving.coach}.` : "";
                return `${record.preferredName ?? record.fullName ?? "This member"} worships at the ${center} and is engaged with the ${serving}. ${coach}`.trim();
              })()
            ]]></Prop>
            <Prop name="image" kind="expression"><![CDATA[
              (() => {
                const records = data.memberDirectory?.records ?? [];
                const fallback = records[0] ?? {};
                const record = records.find((item) => item.id === params.memberId) ?? fallback;
                const fullName = record.fullName ?? 'Member';
                const photoUrl = record.photoUrl ?? '';
                const fallbackUrl = 'https://images.unsplash.com/photo-1545239351-1141bd82e8a6?auto=format&fit=facearea&w=600&h=600&q=80';
                return {
                  src: photoUrl || fallbackUrl,
                  alt: `${fullName}'s profile photo`
                };
              })()
            ]]></Prop>
            <Prop name="metrics" kind="expression"><![CDATA[
              (() => {
                const records = data.memberDirectory?.records ?? [];
                const fallback = records[0] ?? {};
                const record = records.find((item) => item.id === params.memberId) ?? fallback;
                const formatCurrency = (amount) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: amount >= 1000 ? 0 : 2 }).format(amount ?? 0);
                return [
                  { label: 'YTD giving', value: formatCurrency(record.giving?.ytd ?? 0), caption: `Pledge ${formatCurrency(record.giving?.pledge ?? 0)}` },
                  { label: 'Serving rhythm', value: record.serving?.schedule ?? 'Every other week', caption: record.serving?.team ?? 'Serving team' },
                  { label: 'Care status', value: record.carePlan?.status ?? 'Resolved', caption: record.carePlan?.details ?? 'No active plan' }
                ];
              })()
            ]]></Prop>
            <Prop name="primaryCta" kind="expression"><![CDATA[
              (() => {
                const records = data.memberDirectory?.records ?? [];
                const fallback = records[0] ?? {};
                const record = records.find((item) => item.id === params.memberId) ?? fallback;
                const targetId = record.id ?? params.memberId ?? '';
                return {
                  id: 'edit-member-cta',
                  config: {
                    label: 'Edit member',
                    url: `/admin/members/manage?memberId=${targetId}`,
                    variant: 'primary'
                  }
                };
              })()
            ]]></Prop>
            <Prop name="secondaryCta" kind="action" actionId="back-to-list" />
          </Props>
        </Component>
        <Component id="profile-metrics" type="AdminMetricCards">
          <Props>
            <Prop name="title" kind="static">Discipleship pulse</Prop>
            <Prop name="metrics" kind="expression"><![CDATA[
              (() => {
                const records = data.memberDirectory?.records ?? [];
                const fallback = records[0] ?? {};
                const record = records.find((item) => item.id === params.memberId) ?? fallback;
                const formatCurrency = (value) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: value >= 1000 ? 0 : 2 }).format(value ?? 0);
                return [
                  {
                    id: 'metric-recurring',
                    label: 'Recurring giving',
                    value: formatCurrency(record.giving?.recurring?.amount ?? 0),
                    change: record.giving?.recurring?.frequency ?? 'Monthly',
                    trend: 'up',
                    tone: 'informative',
                    description: `Method: ${record.giving?.recurring?.method ?? 'Card'} Â· Last gift ${formatCurrency(record.giving?.lastGift?.amount ?? 0)} on ${record.giving?.lastGift?.date ?? ''}`
                  },
                  {
                    id: 'metric-attendance',
                    label: 'Attendance pulse',
                    value: `${record.attendance?.twelveWeekAttendance ?? 0}% engaged`,
                    change: record.attendance?.lastAttendance ? `Last attended ${record.attendance.lastAttendance}` : 'Attendance unknown',
                    trend: 'up',
                    tone: 'positive',
                    description: record.discipleship?.nextStep ?? 'Confirm next discipleship touchpoint.'
                  },
                  {
                    id: 'metric-serving',
                    label: 'Next serve',
                    value: record.serving?.nextServeDate ?? 'Schedule pending',
                    change: record.serving?.team ? `${record.serving.team} Â· ${record.serving.schedule ?? 'Rhythm TBD'}` : 'Serving opportunity open',
                    trend: 'flat',
                    tone: 'neutral',
                    description: record.carePlan?.assignedTo ? `Care pastor: ${record.carePlan.assignedTo}` : 'Assign a care contact.'
                  }
                ];
              })()
            ]]></Prop>
          </Props>
        </Component>
        <Component id="profile-workspace" type="AdminMemberWorkspace">
          <Props>
            <Prop name="variant" kind="static">profile</Prop>
            <Prop name="tabs" kind="expression"><![CDATA[
              (() => {
                const records = data.memberDirectory?.records ?? [];
                const fallback = records[0] ?? {};
                const record = records.find((item) => item.id === params.memberId) ?? fallback;
                const targetId = record.id ?? params.memberId ?? '';
                const manageUrl = (section) => `/admin/members/manage?memberId=${targetId}&section=${section}`;
                const address = record.household?.address ?? {};
                const envelope = record.household?.envelopeNumber ? `Envelope #${record.household.envelopeNumber}` : 'No envelope assigned';
                const attendancePercent = record.attendance?.twelveWeekAttendance ?? 0;
                const attendanceDisplay = attendancePercent ? `${attendancePercent}% last 12 weeks` : 'Attendance unknown';
                const formatCurrency = (amount) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: amount >= 1000 ? 0 : 2 }).format(amount ?? 0);
                const lastGift = record.giving?.lastGift ?? {};
                const givingSummary = record.giving?.pledge ? `${formatCurrency(record.giving.pledge)} pledge` : 'No active pledge';

                return [
                  {
                    id: 'overview',
                    label: 'Overview',
                    description: 'Identity, household, and sacramental history.',
                    sections: [
                      {
                        kind: 'panel',
                        id: 'identity',
                        title: 'Identity & household',
                        summary: {
                          label: 'Household',
                          value: record.household?.name ?? record.fullName ?? 'Household profile',
                          description: envelope,
                        },
                        panels: [
                          {
                            id: 'profile-basics',
                            title: 'Profile basics',
                            action: { id: 'edit-identity', config: { label: 'Edit identity', url: manageUrl('identity'), variant: 'ghost' } },
                            items: [
                              { label: 'Preferred name', value: record.preferredName ?? record.fullName ?? 'â€”' },
                              { label: 'Birthdate', value: record.demographics?.birthdate ?? 'â€”' },
                              { label: 'Marital status', value: record.demographics?.maritalStatus ?? 'â€”' },
                              { label: 'Anniversary', value: record.demographics?.anniversary ?? 'â€”' },
                              { label: 'Occupation', value: record.demographics?.occupation ?? 'â€”' }
                            ]
                          },
                          {
                            id: 'household',
                            title: 'Household & contact',
                            action: { id: 'edit-household', config: { label: 'Edit household', url: manageUrl('household'), variant: 'ghost' } },
                            items: [
                              { label: 'Household members', type: 'chips', items: record.household?.members ?? [] },
                              { label: 'Preferred contact', value: record.contact?.preferred ?? 'Email' },
                              { label: 'Email', type: 'link', href: record.contact?.email ? `mailto:${record.contact.email}` : undefined, value: record.contact?.email ?? 'â€”' },
                              { label: 'Mobile', value: record.contact?.phone ?? 'â€”' },
                              { label: 'Address', type: 'multiline', value: address.street ? `${address.street}\n${address.city}, ${address.state} ${address.postalCode}` : 'No address on file' }
                            ]
                          }
                        ]
                      },
                      {
                        kind: 'panel',
                        id: 'emergency',
                        title: 'Emergency & milestones',
                        summary: record.emergency?.contact ? {
                          label: 'Primary contact',
                          value: record.emergency.contact,
                          description: `${record.emergency.relationship ?? 'Contact'} Â· ${record.emergency.phone ?? ''}`.trim(),
                        } : null,
                        panels: [
                          {
                            id: 'emergency-contact',
                            title: 'Emergency contact',
                            action: { id: 'edit-emergency', config: { label: 'Edit emergency contact', url: manageUrl('care'), variant: 'ghost' } },
                            items: [
                              { label: 'Primary contact', value: record.emergency?.contact ?? 'â€”' },
                              { label: 'Relationship', value: record.emergency?.relationship ?? 'â€”' },
                              { label: 'Contact number', value: record.emergency?.phone ?? 'â€”' },
                              { label: 'Physician', value: record.emergency?.physician ?? 'â€”' }
                            ]
                          },
                          {
                            id: 'milestones',
                            title: 'Faith milestones',
                            action: { id: 'edit-milestones', config: { label: 'Update milestones', url: manageUrl('discipleship'), variant: 'ghost' } },
                            items: [
                              { label: 'Baptism', value: record.sacraments?.baptismDate ?? 'Not recorded' },
                              { label: 'Membership', value: record.sacraments?.membershipDate ?? record.joinDate ?? 'Not recorded' },
                              { label: 'Child dedications', type: 'chips', items: record.sacraments?.childDedications ?? [] },
                              { label: 'Spiritual milestones', type: 'chips', items: record.discipleship?.milestones ?? [] }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    id: 'engagement',
                    label: 'Engagement',
                    description: 'Groups, ministry interests, and attendance signals.',
                    sections: [
                      {
                        kind: 'panel',
                        id: 'groups',
                        title: 'Communities & pathways',
                        summary: {
                          label: 'Attendance pulse',
                          value: attendanceDisplay,
                          description: `Last attended ${record.attendance?.lastAttendance ?? 'â€”'}`,
                        },
                        panels: [
                          {
                            id: 'group-participation',
                            title: 'Group participation',
                            action: { id: 'edit-groups', config: { label: 'Edit groups', url: manageUrl('engagement'), variant: 'ghost' } },
                            items: [
                              { label: 'Active groups', type: 'chips', items: record.engagement?.groups ?? [] },
                              { label: 'Pathways', type: 'chips', items: record.engagement?.pathways ?? [] },
                              { label: 'Mentor', value: record.discipleship?.mentor ?? 'Not assigned' },
                              { label: 'Next discipleship step', type: 'multiline', value: record.discipleship?.nextStep ?? 'Set the next discipleship step.' }
                            ]
                          },
                          {
                            id: 'gifts-interests',
                            title: 'Gifts & interests',
                            action: { id: 'edit-interests', config: { label: 'Edit interests', url: manageUrl('engagement'), variant: 'ghost' } },
                            items: [
                              { label: 'Spiritual gifts', type: 'chips', items: record.engagement?.spiritualGifts ?? [] },
                              { label: 'Ministry interests', type: 'chips', items: record.engagement?.interests ?? [] },
                              { label: 'Recent prayer needs', type: 'multiline', value: record.carePlan?.prayerRequests ?? 'No prayer requests logged.' }
                            ]
                          }
                        ]
                      },
                      {
                        kind: 'panel',
                        id: 'serving',
                        title: 'Serving & leadership',
                        summary: record.serving?.nextServeDate ? {
                          label: 'Next serve date',
                          value: record.serving.nextServeDate,
                          description: record.serving?.schedule ?? '',
                        } : null,
                        panels: [
                          {
                            id: 'serving-details',
                            title: 'Serving assignment',
                            action: { id: 'edit-serving', config: { label: 'Edit serving', url: manageUrl('serving'), variant: 'ghost' } },
                            items: [
                              { label: 'Team', value: record.serving?.team ?? 'Not assigned' },
                              { label: 'Role', value: record.serving?.role ?? 'â€”' },
                              { label: 'Schedule', value: record.serving?.schedule ?? 'Flexible' },
                              { label: 'Coach', value: record.serving?.coach ?? 'Not assigned' }
                            ]
                          },
                          {
                            id: 'leadership',
                            title: 'Leadership scope',
                            action: { id: 'edit-leadership', config: { label: 'Edit leadership', url: manageUrl('serving'), variant: 'ghost' } },
                            items: [
                              { label: 'Leadership roles', type: 'chips', items: record.leadership?.roles ?? [] },
                              { label: 'Reports to', value: record.leadership?.reportsTo ?? record.serving?.coach ?? 'â€”' },
                              { label: 'Team focus', value: record.leadership?.teamFocus ?? record.serving?.team ?? 'â€”' },
                              { label: 'Last leadership touchpoint', value: record.leadership?.lastHuddle ?? 'â€”' }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    id: 'care',
                    label: 'Care & discipleship',
                    description: 'Pastoral care assignments and confidential notes.',
                    sections: [
                      {
                        kind: 'panel',
                        id: 'care-plan',
                        title: 'Care overview',
                        summary: {
                          label: 'Care status',
                          value: record.carePlan?.status ?? 'Resolved',
                          description: record.carePlan?.details ?? 'No active care plan.',
                        },
                        panels: [
                          {
                            id: 'care-details',
                            title: 'Care plan',
                            action: { id: 'edit-care', config: { label: 'Update care', url: manageUrl('care'), variant: 'ghost' } },
                            items: [
                              { label: 'Status', type: 'badge', variant: record.carePlan?.statusVariant ?? 'neutral', value: record.carePlan?.status ?? 'Resolved' },
                              { label: 'Assigned pastor', value: record.carePlan?.assignedTo ?? 'â€”' },
                              { label: 'Follow-up date', value: record.carePlan?.followUpDate ?? 'â€”' },
                              { label: 'Notes', type: 'multiline', value: record.carePlan?.details ?? 'No active tasks.' }
                            ]
                          },
                          {
                            id: 'pastoral-notes',
                            title: 'Pastoral notes',
                            action: { id: 'edit-notes', config: { label: 'Edit notes', url: manageUrl('care'), variant: 'ghost' } },
                            items: [
                              { label: 'Confidential notes', type: 'multiline', value: record.carePlan?.pastoralNotes ?? 'No notes on file.' },
                              { label: 'Prayer requests', type: 'multiline', value: record.carePlan?.prayerRequests ?? 'No prayer requests logged.' },
                              { label: 'Care team', type: 'chips', items: record.carePlan?.team ?? [] }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    id: 'finance',
                    label: 'Finance',
                    description: 'Giving trends, pledges, and campaign participation.',
                    sections: [
                      {
                        kind: 'panel',
                        id: 'giving',
                        title: 'Giving snapshot',
                        summary: {
                          label: 'Recurring giving',
                          value: record.giving?.recurring ? `${formatCurrency(record.giving.recurring.amount)} ${record.giving.recurring.frequency}` : 'Not enrolled',
                          description: givingSummary,
                        },
                        panels: [
                          {
                            id: 'giving-metrics',
                            title: 'Giving metrics',
                            action: { id: 'edit-giving', config: { label: 'Update giving', url: manageUrl('finance'), variant: 'ghost' } },
                            items: [
                              { label: 'Year-to-date', type: 'currency', value: record.giving?.ytd ?? 0 },
                              { label: 'Pledge commitment', type: 'currency', value: record.giving?.pledge ?? 0, description: record.giving?.campaign ?? 'No active campaign' },
                              { label: 'Last gift', value: lastGift.date ? `${lastGift.date} Â· ${lastGift.fund ?? 'Fund'}` : 'â€”', description: lastGift.amount ? formatCurrency(lastGift.amount) : '' },
                              { label: 'Preferred fund', value: record.giving?.primaryFund ?? 'General fund' }
                            ]
                          },
                          {
                            id: 'finance-admin',
                            title: 'Finance admin',
                            action: { id: 'manage-statements', config: { label: 'Record finance note', url: manageUrl('finance'), variant: 'ghost' } },
                            items: [
                              { label: 'Statement delivery', value: record.finance?.statementPreference ?? 'Email' },
                              { label: 'Gift capacity tier', value: record.finance?.capacityTier ?? 'Mid-tier' },
                              { label: 'Finance notes', type: 'multiline', value: record.finance?.notes ?? 'No finance notes.' }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    id: 'admin',
                    label: 'Admin',
                    description: 'Membership status, centers, and segmentation tags.',
                    sections: [
                      {
                        kind: 'panel',
                        id: 'administration',
                        title: 'Administrative details',
                        summary: {
                          label: 'Member ID',
                          value: record.id ?? 'Pending ID',
                          description: record.stage ?? 'Membership stage pending',
                        },
                        panels: [
                          {
                            id: 'membership',
                            title: 'Membership & centers',
                            action: { id: 'edit-admin', config: { label: 'Manage admin data', url: manageUrl('admin'), variant: 'ghost' } },
                            items: [
                              { label: 'Stage', value: record.stage ?? 'Active' },
                              { label: 'Membership type', value: record.membershipType ?? 'â€”' },
                              { label: 'Primary center', value: record.center ?? 'â€”' },
                              { label: 'Join date', value: record.joinDate ?? record.profile?.joinDate ?? 'â€”' }
                            ]
                          },
                          {
                            id: 'tags-segmentation',
                            title: 'Segmentation & tags',
                            action: { id: 'edit-tags', config: { label: 'Edit tags', url: manageUrl('admin'), variant: 'ghost' } },
                            items: [
                              { label: 'Tags', type: 'chips', items: record.tags ?? [] },
                              { label: 'Household envelope', value: record.household?.envelopeNumber ?? 'â€”' },
                              { label: 'Data steward', value: record.admin?.steward ?? 'â€”' },
                              { label: 'Last review', value: record.admin?.lastReview ?? 'â€”' }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ];
              })()
            ]]></Prop>
          </Props>
        </Component>
        <Component id="profile-timeline" type="AdminActivityTimeline">
          <Props>
            <Prop name="title" kind="static">Recent milestones</Prop>
            <Prop name="events" kind="expression"><![CDATA[
              (() => {
                const records = data.memberDirectory?.records ?? [];
                const fallback = records[0] ?? {};
                const record = records.find((item) => item.id === params.memberId) ?? fallback;
                return record.timeline ?? [];
              })()
            ]]></Prop>
          </Props>
        </Component>
      </Region>
    </Regions>
    <DataSources>
      <DataSource id="memberDirectory" kind="service">
        <Json><![CDATA[
          {
            "records": [
              {
                "id": "mem_001",
                "fullName": "Avery Johnson",
                "preferredName": "Avery",
                "photoUrl": "https://images.unsplash.com/photo-1544723795-3fb6469f5b39?auto=format&fit=facearea&w=400&h=400&q=80",
                "stage": "Active member",
                "statusVariant": "success",
                "membershipType": "Covenant member",
                "joinDate": "2016-03-14",
                "center": "Downtown Center",
                "demographics": {
                  "birthdate": "1986-05-12",
                  "maritalStatus": "Married",
                  "anniversary": "2012-06-18",
                  "occupation": "Operations director"
                },
                "serving": {
                  "team": "Hospitality",
                  "role": "Usher Captain",
                  "schedule": "2nd & 4th Sundays Â· 8:30a",
                  "coach": "Rachel Kim",
                  "nextServeDate": "2024-10-27"
                },
                "leadership": {
                  "roles": ["Hospitality captain", "Leadership mentor"],
                  "reportsTo": "Rachel Kim",
                  "teamFocus": "First impressions",
                  "lastHuddle": "2024-10-05"
                },
                "household": {
                  "name": "Johnson Family",
                  "envelopeNumber": "2041",
                  "members": ["Avery Johnson", "Jordan Johnson", "Micah (7)", "Selah (4)"],
                  "address": {
                    "street": "412 Hope Ave",
                    "city": "Springfield",
                    "state": "IL",
                    "postalCode": "62704"
                  }
                },
                "contact": {
                  "email": "avery.johnson@example.org",
                  "phone": "(555) 204-1188",
                  "preferred": "Text"
                },
                "emergency": {
                  "contact": "Jordan Johnson",
                  "relationship": "Spouse",
                  "phone": "(555) 204-1189",
                  "physician": "Dr. Mae Chen"
                },
                "sacraments": {
                  "baptismDate": "2014-03-02",
                  "membershipDate": "2016-03-14",
                  "childDedications": ["Micah 2017", "Selah 2020"]
                },
                "attendance": {
                  "twelveWeekAttendance": 92,
                  "lastAttendance": "2024-10-13",
                  "lastCampus": "Downtown Center"
                },
                "engagement": {
                  "groups": ["Leadership Cohort", "Hospitality Huddle"],
                  "pathways": ["Mentor track", "Hospitality residency"],
                  "spiritualGifts": ["Leadership", "Hospitality"],
                  "interests": ["First impressions", "Mentoring"]
                },
                "giving": {
                  "ytd": 18450,
                  "pledge": 22000,
                  "campaign": "Legacy Vision 2025",
                  "recurring": { "amount": 900, "frequency": "Monthly", "method": "ACH" },
                  "lastGift": { "amount": 450, "date": "2024-10-06", "fund": "General Tithe" },
                  "primaryFund": "General Tithe"
                },
                "finance": {
                  "statementPreference": "Email",
                  "capacityTier": "Legacy champion",
                  "notes": "Prefers quarterly impact briefs with hospitality volunteer stats."
                },
                "discipleship": {
                  "smallGroup": "Downtown Leadership Cohort",
                  "mentor": "Carlos Vega",
                  "milestones": ["Baptized 2014", "Child dedication 2017", "Leadership Cohort 2022"],
                  "nextStep": "Mentor two new ushers before Advent."
                },
                "carePlan": {
                  "stage": "Active",
                  "statusVariant": "info",
                  "status": "Coaching",
                  "details": "Leadership coaching check-in scheduled October 28.",
                  "assignedTo": "Pastor Lauren Patel",
                  "followUpDate": "2024-10-28",
                  "pastoralNotes": "Ensure Avery has support onboarding new ushers during Advent.",
                  "prayerRequests": "Pray for energy balancing work travel with serving rhythm.",
                  "team": ["Pastor Lauren Patel", "Rachel Kim"],
                  "prayerFocus": "Hospitality growth"
                },
                "admin": {
                  "steward": "Finance desk",
                  "lastReview": "2024-09-12"
                },
                "timeline": [
                  {
                    "id": "t1",
                    "title": "Hosted hospitality huddle",
                    "date": "Oct 13",
                    "timeAgo": "3 days ago",
                    "description": "Led new volunteer orientation for the downtown center.",
                    "category": "Serving",
                    "stage": "completed",
                    "icon": "ðŸ™Œ"
                  },
                  {
                    "id": "t2",
                    "title": "Mentor meeting",
                    "date": "Oct 21",
                    "timeAgo": "In 5 days",
                    "description": "Coaching session with new volunteer captain.",
                    "category": "Leadership",
                    "stage": "scheduled",
                    "icon": "ðŸ—“ï¸"
                  }
                ]
              },
              {
                "id": "mem_002",
                "fullName": "Elena Ruiz",
                "preferredName": "Elena",
                "photoUrl": "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?auto=format&fit=facearea&w=400&h=400&q=80",
                "stage": "New here",
                "statusVariant": "info",
                "membershipType": "Attender",
                "joinDate": "",
                "center": "Northside Center",
                "demographics": {
                  "birthdate": "1993-11-02",
                  "maritalStatus": "Single",
                  "occupation": "UX researcher"
                },
                "serving": {
                  "team": "Exploring",
                  "role": "Foundations participant",
                  "schedule": "Sundays Â· 9:30a",
                  "nextServeDate": "2024-10-20"
                },
                "household": {
                  "name": "Ruiz Household",
                  "envelopeNumber": "Pending",
                  "members": ["Elena Ruiz"],
                  "address": {
                    "street": "88 River Crossing",
                    "city": "Franklin",
                    "state": "TN",
                    "postalCode": "37067"
                  }
                },
                "contact": {
                  "email": "elena.ruiz@example.org",
                  "phone": "(555) 407-9931",
                  "preferred": "Phone"
                },
                "emergency": {
                  "contact": "Jamie Brooks",
                  "relationship": "Small group mentor",
                  "phone": "(555) 320-4411"
                },
                "sacraments": {
                  "baptismDate": "",
                  "membershipDate": "",
                  "childDedications": []
                },
                "attendance": {
                  "twelveWeekAttendance": 64,
                  "lastAttendance": "2024-10-06",
                  "lastCampus": "Northside Center"
                },
                "engagement": {
                  "groups": ["Foundations Track"],
                  "pathways": ["Discover class"],
                  "spiritualGifts": [],
                  "interests": ["Hospitality", "Community"]
                },
                "giving": {
                  "ytd": 420,
                  "pledge": 0,
                  "recurring": null,
                  "lastGift": { "amount": 70, "date": "2024-10-05", "fund": "Guest Offering" },
                  "primaryFund": "Guest Offering"
                },
                "finance": {
                  "statementPreference": "Paper",
                  "capacityTier": "Emerging giver",
                  "notes": "Interested in learning about generosity pathways."
                },
                "discipleship": {
                  "smallGroup": "Foundations Track",
                  "mentor": "Jamie Brooks",
                  "milestones": ["Guest dinner 2024-09-22"],
                  "nextStep": "Complete covenant class interview."
                },
                "carePlan": {
                  "stage": "Observation",
                  "statusVariant": "neutral",
                  "status": "Observation",
                  "details": "Follow up after covenant class interview.",
                  "assignedTo": "Center Connections Team",
                  "followUpDate": "2024-10-24",
                  "team": ["Connections Team"],
                  "prayerRequests": "Discernment about joining a small group."
                },
                "admin": {
                  "steward": "Connections desk",
                  "lastReview": "2024-10-01"
                },
                "timeline": [
                  {
                    "id": "r1",
                    "title": "Foundations session two",
                    "date": "Oct 10",
                    "timeAgo": "6 days ago",
                    "description": "Completed teaching on church values.",
                    "category": "Assimilation",
                    "stage": "completed",
                    "icon": "ðŸ“˜"
                  },
                  {
                    "id": "r2",
                    "title": "Covenant interview scheduled",
                    "date": "Oct 24",
                    "timeAgo": "In 8 days",
                    "description": "Meeting with elder team to finalize membership.",
                    "category": "Next step",
                    "stage": "scheduled",
                    "icon": "ðŸ¤"
                  }
                ]
              },
              {
                "id": "mem_003",
                "fullName": "Samuel and Dana Lee",
                "preferredName": "Lee Family",
                "photoUrl": "https://images.unsplash.com/photo-1531891437562-4301cf35b7e4?auto=format&fit=facearea&w=400&h=400&q=80",
                "stage": "Active member",
                "statusVariant": "success",
                "center": "Southridge Center",
                "serving": {
                  "team": "Groups",
                  "role": "Marriage mentors",
                  "schedule": "1st & 3rd Wednesdays"
                },
                "household": {
                  "name": "Lee Household",
                  "members": ["Samuel Lee", "Dana Lee", "Elliot (12)"],
                  "address": {
                    "street": "215 Grace Circle",
                    "city": "Nashville",
                    "state": "TN",
                    "postalCode": "37211"
                  }
                },
                "contact": {
                  "email": "samuel.dana.lee@example.org",
                  "phone": "(555) 782-4410",
                  "preferred": "Email"
                },
                "giving": {
                  "ytd": 23780,
                  "pledge": 30000,
                  "campaign": "Southridge Expansion",
                  "recurring": { "amount": 2000, "frequency": "Monthly", "method": "Card" },
                  "lastGift": { "amount": 2500, "date": "2024-09-30", "fund": "Expansion" }
                },
                "discipleship": {
                  "smallGroup": "Southridge Marriage Mentors",
                  "mentor": "Elder Hannah Cruz",
                  "milestones": ["Baptized 2009", "Marriage mentors certified 2018"],
                  "nextStep": "Launch two new marriage groups in Q1."
                },
                "carePlan": {
                  "stage": "Resolved",
                  "statusVariant": "neutral",
                  "details": "No active pastoral needs.",
                  "assignedTo": ""
                },
                "timeline": [
                  {
                    "id": "l1",
                    "title": "Led marriage intensive",
                    "date": "Oct 05",
                    "timeAgo": "11 days ago",
                    "description": "Hosted eight couples for weekend retreat.",
                    "category": "Ministry",
                    "stage": "completed",
                    "icon": "ðŸ’"
                  }
                ]
              },
              {
                "id": "mem_004",
                "fullName": "Jordan Miles",
                "preferredName": "Jordan",
                "photoUrl": "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=facearea&w=400&h=400&q=80",
                "stage": "Shepherding",
                "statusVariant": "warning",
                "center": "Downtown Center",
                "serving": {
                  "team": "Tech",
                  "role": "Audio volunteer",
                  "schedule": "Paused"
                },
                "household": {
                  "name": "Miles Household",
                  "members": ["Jordan Miles", "Taylor Miles"],
                  "address": {
                    "street": "18 Lantern Way",
                    "city": "Springfield",
                    "state": "IL",
                    "postalCode": "62703"
                  }
                },
                "contact": {
                  "email": "jordan.miles@example.org",
                  "phone": "(555) 338-6611",
                  "preferred": "Text"
                },
                "giving": {
                  "ytd": 2600,
                  "pledge": 3000,
                  "recurring": null,
                  "lastGift": { "amount": 200, "date": "2024-08-18", "fund": "General Tithe" }
                },
                "discipleship": {
                  "smallGroup": "Young Professionals",
                  "mentor": "Pastor Lauren Patel",
                  "milestones": ["Baptized 2016"],
                  "nextStep": "Resume serve team rotation after care plan concludes."
                },
                "carePlan": {
                  "stage": "Active",
                  "statusVariant": "warning",
                  "details": "Meeting with counselor weekly for grief support.",
                  "assignedTo": "Care Pastor Ben Adams"
                },
                "timeline": [
                  {
                    "id": "m1",
                    "title": "Counseling session",
                    "date": "Oct 11",
                    "timeAgo": "5 days ago",
                    "description": "Third session in current care plan.",
                    "category": "Care",
                    "stage": "completed",
                    "icon": "ðŸ•Šï¸"
                  },
                  {
                    "id": "m2",
                    "title": "Care team check-in",
                    "date": "Oct 17",
                    "timeAgo": "Tomorrow",
                    "description": "Home visit with meal train delivery.",
                    "category": "Shepherding",
                    "stage": "scheduled",
                    "icon": "ðŸ²"
                  }
                ]
              }
            ]
          }
        ]]></Json>
        <Config>
          <handler>admin-community.members.profile.memberDirectory</handler>
        </Config>
      </DataSource>
    </DataSources>
    <Actions>
      <Action id="back-to-list" kind="link">
        <Config>
          <Label>Back to list</Label>
          <Url>/admin/members/list</Url>
          <Variant>secondary</Variant>
        </Config>
      </Action>
    </Actions>
  </Page>
</PageDefinition>
